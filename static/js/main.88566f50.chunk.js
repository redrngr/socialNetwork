(this.webpackJsonpebase=this.webpackJsonpebase||[]).push([[0],{60:function(e,t,s){},61:function(e,t,s){"use strict";s.r(t);var a=s(15),n=s.n(a),c=s(9),r=s(63),i=s(29),l=s(2),o=s(30),d=s.n(o).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"b5ca5d77-73a2-4e1d-9d41-4093195e078c"}}),m={all:function(e,t,s){return d.get("/users",{params:{page:e,count:t,term:s}}).then((function(e){return e.data}))},profile:function(e){return d.get("/profile/".concat(e)).then((function(e){return e.data}))}},u={me:function(){return d.get("/auth/me")},login:function(e,t,s){return d.post("/auth/login",{email:e,password:t,rememberMe:s})},logout:function(){return d.delete("/auth/login")}},j={users:[],inProgress:!1,pageSize:10,totalUsersCount:0,currentPage:1,filter:{term:""}},b=function(e){return{type:"LIST_PAGE_LOADED",users:e}},h=function(e){return{type:"ASYNC_TOGGLE",inProgress:e}},p=function(e){return{type:"SET_TOTAL_USERS_COUNT",totalUsersCount:e}},O=function(e){return{type:"SET_CURRENT_PAGE",page:e}},x=function(e){return{type:"SET_FILTER",term:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_PAGE_LOADED":return Object(l.a)(Object(l.a)({},e),{},{users:t.users});case"ASYNC_TOGGLE":return Object(l.a)(Object(l.a)({},e),{},{inProgress:t.inProgress});case"SET_TOTAL_USERS_COUNT":return Object(l.a)(Object(l.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"SET_CURRENT_PAGE":return Object(l.a)(Object(l.a)({},e),{},{currentPage:t.page});case"SET_FILTER":return Object(l.a)(Object(l.a)({},e),{},{filter:{term:t.term}});default:return e}},g={profile:{userId:0,lookingForAJob:!1,lookingForAJobDescription:"",fullName:"",contacts:{github:"",vk:"",facebook:"",instagram:"",twitter:"",website:"",youtube:"",mainLink:""},photos:{small:"",large:""}},inProgress:!1},N=function(e){return{type:"PROFILE_PAGE_LOADED",profile:e}},v=function(e){return{type:"ASYNC_TOGGLE",inProgress:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE_PAGE_LOADED":return Object(l.a)(Object(l.a)({},e),{},{profile:t.profile});case"ASYNC_TOGGLE":return Object(l.a)(Object(l.a)({},e),{},{inProgress:t.inProgress});default:return e}},w={id:0,email:"",login:"",messages:null,isAuth:!1,inProgress:!1,appLoaded:!1},E=function(){return{type:"APP_LOADED"}},S=function(e){return{type:"ASYNC_TOGGLE",inProgress:e}},P=function(e,t,s,a){return{type:"SET_AUTH_DATA",payload:{id:e,login:t,email:s,isAuth:a}}},A=function(e){return{type:"ERROR",messages:e}},k=function(){return function(e){e(S(!0)),u.me().then((function(t){if(0===t.data.resultCode){var s=t.data.data,a=s.id,n=s.email,c=s.login;e(P(a,c,n,!0))}e(S(!1)),e(E())}))}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOADED":return Object(l.a)(Object(l.a)({},e),{},{appLoaded:!0});case"SET_AUTH_DATA":return Object(l.a)(Object(l.a)({},e),t.payload);case"ERROR":return Object(l.a)(Object(l.a)({},e),{},{messages:t.messages});case"ASYNC_TOGGLE":return Object(l.a)(Object(l.a)({},e),{},{inProgress:t.inProgress});default:return e}},C=Object(r.c)(Object(r.b)({list:f,profile:y,common:T}),Object(r.a)(i.a));window.store=C;var L=s(4),_=s(3),U=s(11),R=s(31),I=s(1),F=s.p+"static/media/avatarHolder.14a17919.png",G=s(0),D=function(e){return Object(G.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[Object(G.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(G.jsx)("span",{className:"sr-only"})}),Object(G.jsx)("h5",{className:"text-primary p-1",children:Object(G.jsx)("b",{children:e.message})})]})},z=Object(c.b)((function(e){return{profile:e.profile.profile,inProgress:e.profile.inProgress,ownId:e.common.id}}),{getProfile:function(e){return function(t){t(v(!0)),m.profile(e).then((function(e){t(v(!1)),t(N(e))})).catch((function(e){t(v(!1)),console.log(e)}))}}})((function(e){var t=e.profile,s=Object(R.a)(e,["profile"]),a=Object(I.useState)(!1),n=Object(U.a)(a,2),c=n[0],r=n[1],i=s.match.params.id?Number(s.match.params.id):s.ownId;Object(I.useEffect)((function(){s.getProfile(i)}),[i]);return s.inProgress?Object(G.jsx)(D,{message:"Loading..."}):Object(G.jsxs)("div",{className:"d-flex mb-5 p-3",style:{width:"100%"},children:[Object(G.jsx)("div",{className:"d-flex flex-column",children:Object(G.jsx)("img",{className:"card-img-top",src:t.photos.large||F,alt:"Pic"})}),Object(G.jsx)("div",{className:"ms-3",children:Object(G.jsxs)("form",{className:"row g-3",children:[Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"name",value:t.fullName||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{htmlFor:"github",className:"form-label",children:"GITHUB"}),Object(G.jsx)("input",{type:"tel",className:"form-control",id:"github",value:t.contacts.github||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{htmlFor:"vk",className:"form-label",children:"VK"}),Object(G.jsx)("input",{type:"email",className:"form-control",id:"vk",value:t.contacts.vk||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{htmlFor:"facebook",className:"form-label",children:"FACEBOOK"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"facebook",value:t.contacts.facebook||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-12",children:[Object(G.jsx)("label",{htmlFor:"instagram",className:"form-label",children:"INSTAGRAM"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"instagram",value:t.contacts.instagram||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-12",children:[Object(G.jsx)("label",{htmlFor:"twitter",className:"form-label",children:"TWITTER"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"twitter",value:t.contacts.twitter||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-12",children:[Object(G.jsx)("label",{htmlFor:"website",className:"form-label",children:"WEBSITE"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"website",value:t.contacts.website||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{htmlFor:"youtube",className:"form-label",children:"YOUTUBE"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"youtube",value:t.contacts.youtube||"",disabled:!c,readOnly:!c})]}),Object(G.jsxs)("div",{className:"col-md-2",children:[Object(G.jsx)("label",{htmlFor:"mainLink",className:"form-label",children:"MAINLINK"}),Object(G.jsx)("input",{type:"text",className:"form-control",id:"mainLink",value:t.contacts.mainLink||"",disabled:!c,readOnly:!c})]}),i===s.ownId&&Object(G.jsx)("div",{className:"d-flex justify-content-between mt-3 mb-3",children:c?Object(G.jsx)("button",{type:"submit",className:"btn btn-success ms-3",children:"Save changes"}):Object(G.jsx)("div",{className:"btn btn-primary",onClick:function(){r(!c)},children:"Edit profile"})})]})})]})})),M=function(e){var t=e.id,s=e.state;return Object(G.jsxs)("div",{className:"card m-3",style:{width:"14rem"},children:[Object(G.jsx)("img",{className:"card-img-top",src:s.photos.large||F,height:"222",alt:"avatar",style:{fontSize:0}}),Object(G.jsxs)("div",{className:"card-body h-100 d-flex flex-column justify-content-between",children:[Object(G.jsxs)("div",{className:"mb-2",children:[Object(G.jsx)("h5",{className:"card-title",children:s.name}),Object(G.jsx)("p",{className:"card-text",children:s.status||"Hi! i am React JS Junior developer"})]}),Object(G.jsx)(L.b,{className:"btn btn-outline-primary",to:"/users/"+t,children:"More"})]})]})},q=function(e){var t=Object(I.useState)(""),s=Object(U.a)(t,2),a=s[0],n=s[1];return Object(G.jsx)("form",{className:"me-3",onReset:function(){a&&(n(""),e.handleSearch(""))},children:Object(G.jsxs)("div",{className:"input-group flex-nowrap",children:[Object(G.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"Search"}),Object(G.jsx)("input",{name:"search",className:"form-control",type:"search","aria-label":"Search",placeholder:"Enter the name",value:a,onChange:function(t){n(t.target.value),e.handleSearch(t.target.value)}}),Object(G.jsx)("button",{className:"btn btn-outline-secondary",type:"reset",children:"Reset"})]})})},Y=function(e){var t=e.totalCount,s=e.pageSize,a=e.currentPage,n=e.portionSize,c=void 0===n?10:n,r=e.term,i=e.handleClick,l=Math.ceil(t/s),o=new Array(l).fill(1).map((function(e,t){return e+t})),d=Math.ceil(l/10),m=Object(I.useState)(1),u=Object(U.a)(m,2),j=u[0],b=u[1],h=(j-1)*c+1,p=j*c;Object(I.useEffect)((function(){b(1)}),[r]);return Object(G.jsx)("nav",{"aria-label":"Page navigation example",children:Object(G.jsxs)("ul",{className:"pagination mb-0",onClick:i,children:[Object(G.jsx)("li",{className:"page-item",children:Object(G.jsx)(L.c,{className:"page-link",onClick:function(e){e.stopPropagation(),j>1&&b(j-1)},to:"#","aria-disabled":!t,children:"Previous"})}),o.filter((function(e){return e>=h&&e<=p})).map((function(e){return Object(G.jsx)("li",{className:a===e?"page-item active":"page-item",children:Object(G.jsx)(L.c,{className:"page-link",id:e,to:"#",children:e})},e)})),Object(G.jsx)("li",{className:"page-item",children:Object(G.jsx)(L.c,{className:"page-link",onClick:function(e){e.stopPropagation(),j<d&&b(j+1)},to:"#","aria-disabled":!t,children:"Next"})})]})})},J=Object(c.b)((function(e){return{users:e.list.users,inProgress:e.list.inProgress,totalUsersCount:e.list.totalUsersCount,currentPage:e.list.currentPage,pageSize:e.list.pageSize,term:e.list.filter.term}}),{getUsers:function(e,t,s){return function(a){a(h(!0)),m.all(e,t,s).then((function(e){a(h(!1)),a(b(e.items)),a(p(e.totalCount))})).catch((function(e){a(h(!1)),console.log(e)})),a(O(e)),a(x(s))}}})((function(e){var t=Object.assign({},e);Object(I.useEffect)((function(){t.getUsers(1,t.pageSize,"")}),[]);var s=function(e){return t.getUsers(1,t.pageSize,e)};return s=function(e,t){var s;return function(){for(var a=this,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];clearTimeout(s),s=setTimeout((function(){return e.apply(a,c)}),t)}}(s,300),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"d-flex flex-wrap justify-content-between mx-3",children:[Object(G.jsx)(q,{pageSize:t.pageSize,currentPage:t.currentPage,handleSearch:s,term:t.term}),Object(G.jsx)(Y,{currentPage:t.currentPage,totalCount:t.totalUsersCount,pageSize:t.pageSize,handleClick:function(e){var s=Number(e.target.id);s!==t.currentPage&&t.getUsers(s,t.pageSize,t.term)},term:t.term})]}),Object(G.jsx)("hr",{}),t.inProgress?Object(G.jsx)(D,{message:"Loading..."}):0!==t.users.length?Object(G.jsx)("div",{className:"d-flex flex-wrap justify-content-start",children:t.users.map((function(e){return Object(G.jsx)(M,{state:e,id:e.id},e.id)}))}):Object(G.jsx)("div",{className:"d-flex",children:Object(G.jsx)("span",{className:"alert alert-warning ms-3",children:"Users not found"})})]})})),B=function(e){var t=null;Object(I.useEffect)((function(){return document.addEventListener("mousedown",s),function(){return document.removeEventListener("mousedown",s)}}),[]);var s=function(s){!t||t.contains(s.target)||t.previousSibling.contains(s.target)||e.onOutside(s)};return Object(G.jsx)("ul",{className:"dropdown-menu dropdown-menu-dark text-small shadow show","aria-labelledby":"dropdownUser1",style:{position:"absolute",inset:"auto auto 0px 0px",margin:"0px",transform:"translate(0px, -33.65px)"},"data-popper-placement":"top-start",ref:function(e){return t=e},children:Object(G.jsx)("li",{children:Object(G.jsx)(L.b,{className:"dropdown-item",to:"#",onClick:function(t){e.onOutside(t),e.logout()},children:"Logout"})})})},H=s.p+"static/media/logo.d024f6dc.svg",K=Object(c.b)((function(e){return{isAuth:e.common.isAuth,login:e.common.login}}),{logout:function(){return function(e){e(S(!0)),u.logout().then((function(t){0===t.data.resultCode&&e(P(0,"","",!1)),e(S(!1))}))}}})((function(e){var t=Object(I.useState)(!1),s=Object(U.a)(t,2),a=s[0],n=s[1],c=function(e){e.stopPropagation(),n(!a)};return Object(G.jsxs)("nav",{className:"d-flex flex-column justify-content-between h-100 text-white bg-dark",children:[Object(G.jsxs)("div",{children:[Object(G.jsxs)(L.b,{to:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none",children:[Object(G.jsx)("img",{className:"bi me-2",src:H,width:"32",height:"32",alt:"img"}),Object(G.jsx)("span",{className:"fs-4",children:Object(G.jsx)("b",{children:"Social network"})})]}),Object(G.jsx)("hr",{}),Object(G.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(G.jsx)("li",{className:"nav-item",children:Object(G.jsx)(L.c,{to:"/profile",className:"nav-link text-white","aria-current":"page",activeClassName:"active",children:"My profile"})}),Object(G.jsx)("li",{className:"nav-item",children:Object(G.jsx)(L.c,{to:"/messages",className:"nav-link text-white","aria-current":"page",activeClassName:"active",children:"Messages"})}),Object(G.jsx)("li",{className:"nav-item",children:Object(G.jsx)(L.c,{to:"/users",className:"nav-link text-white","aria-current":"page",activeClassName:"active",children:"Users"})})]})]}),e.isAuth&&Object(G.jsxs)("div",{className:"dropdown",children:[Object(G.jsx)("hr",{}),Object(G.jsx)(L.b,{to:"#",className:"text-white text-decoration-none dropdown-toggle",id:"dropdownUser1","data-bs-toggle":"dropdown","aria-expanded":a,onClick:c,children:Object(G.jsx)("strong",{children:e.login})}),a&&Object(G.jsx)(B,{onOutside:c,logout:e.logout})]})]})})),W=function(){return Object(G.jsxs)("div",{className:"text-center",style:{paddingTop:"30vh"},children:[Object(G.jsx)("h1",{children:"Welcome!"}),Object(G.jsx)("h2",{children:"Enjoy my social network"}),Object(G.jsx)("div",{className:"mb-2",children:"Dolor ipsum do voluptate do amet sit ut qui do reprehenderit officia. Reprehenderit do proident velit esse cupidatat exercitation sint in. Ad aliquip culpa magna culpa amet ipsum aliquip. Sunt anim ipsum ipsum dolore nulla id veniam do enim. Eu ea est velit qui fugiat labore ex. Eu Lorem non officia minim anim do aliquip laborum id proident. Irure id magna ad ex qui aliquip et ex."}),Object(G.jsx)("div",{children:Object(G.jsx)(L.b,{to:"/users",className:"btn btn-primary btn-lg me-3",children:Object(G.jsx)("span",{className:"glyphicon glyphicon-home",children:"Show users's list"})})})]})},V=s.p+"static/media/logo_black.988a0766.svg",Q=Object(c.b)((function(e){return{isAuth:e.common.isAuth,inProgress:e.common.inProgress,messages:e.common.messages}}),{login:function(e,t,s){return function(a){a(S(!0)),u.login(e,t,s).then((function(e){0===e.data.resultCode?(a(A(null)),a(k())):a(A(e.data.messages)),a(S(!1))}))}}})((function(e){var t=Object(I.useState)({email:"",password:"",rememberMe:!1}),s=Object(U.a)(t,2),a=s[0],n=s[1];return Object(I.useEffect)((function(){e.isAuth&&e.history.push("/profile")}),[e.isAuth]),Object(G.jsx)("main",{className:"container pt-5 text-center",children:Object(G.jsxs)("form",{className:"w-25 mx-auto",onSubmit:function(t){t.preventDefault(),e.login(a.email,a.password,a.rememberMe)},children:[Object(G.jsx)("img",{className:"mb-4",src:V,alt:"pic",width:"72",height:"57",style:{fontSize:0}}),Object(G.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Please sign in"}),e.messages&&Object(G.jsx)("ul",{className:"ps-4 alert alert-danger text-start",children:e.messages.map((function(e){return Object(G.jsx)("li",{children:e})}))}),Object(G.jsxs)("div",{className:"form-floating mb-3",children:[Object(G.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:a.email,onChange:function(e){n(Object(l.a)(Object(l.a)({},a),{},{email:e.target.value}))}}),Object(G.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(G.jsxs)("div",{className:"form-floating mb-3",children:[Object(G.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"password",value:a.password,onChange:function(e){n(Object(l.a)(Object(l.a)({},a),{},{password:e.target.value}))}}),Object(G.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(G.jsx)("div",{className:"checkbox mb-3",children:Object(G.jsxs)("label",{children:[Object(G.jsx)("input",{type:"checkbox",value:"remember-me",checked:a.rememberMe,onChange:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{rememberMe:e.target.checked}))}})," Remember me"]})}),Object(G.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",disabled:e.inProgress,children:"Sign in"}),Object(G.jsx)("p",{className:"text-muted",children:"Social network\xa9 2021"})]})})})),X=function(){return Object(G.jsxs)("div",{className:"text-center",style:{paddingTop:"30vh"},children:[Object(G.jsx)("h1",{children:"Oops!"}),Object(G.jsx)("h2",{children:"404 Not Found"}),Object(G.jsx)("div",{className:"mb-2",children:"Sorry, an error has occured, Requested page not found!"}),Object(G.jsx)("div",{className:"error-actions",children:Object(G.jsx)(L.b,{to:"/users",className:"btn btn-primary btn-lg me-3",children:Object(G.jsx)("span",{className:"glyphicon glyphicon-home",children:"Show users's list"})})})]})},Z=Object(c.b)((function(e){return{isAuth:e.common.isAuth,appLoaded:e.common.appLoaded}}),{getUserData:k})((function(e){return Object(I.useEffect)((function(){e.getUserData()}),[e.isAuth]),e.appLoaded?e.isAuth?Object(G.jsxs)("div",{className:"d-flex flex-nowrap vh-100 overflow-hidden",children:[Object(G.jsx)("aside",{className:"d-flex flex-column flex-shrink-0 p-3 text-white bg-dark",style:{width:"280px"},children:Object(G.jsx)(K,{})}),Object(G.jsx)("main",{className:"container pt-3",children:Object(G.jsxs)(_.d,{children:[Object(G.jsx)(_.b,{exact:!0,path:"/",component:W}),Object(G.jsx)(_.b,{exact:!0,path:"/profile",component:z}),Object(G.jsx)(_.b,{exact:!0,path:"/users",component:J}),Object(G.jsx)(_.b,{path:"/users/:id",component:z}),Object(G.jsx)(_.b,{path:"/login",component:Q}),Object(G.jsx)(_.b,{component:X})]})})]}):Object(G.jsx)("div",{className:"d-flex flex-nowrap vh-100 overflow-hidden",children:Object(G.jsx)("main",{className:"container pt-3",children:Object(G.jsxs)(_.d,{children:[Object(G.jsx)(_.b,{path:"/login",component:Q}),Object(G.jsx)(_.a,{to:"/login"})]})})}):Object(G.jsx)(D,{message:"Wait"})}));s(60);n.a.render(Object(G.jsx)(c.a,{store:C,children:Object(G.jsx)(L.a,{children:Object(G.jsx)(_.d,{children:Object(G.jsx)(_.b,{path:"/",component:Z})})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.88566f50.chunk.js.map